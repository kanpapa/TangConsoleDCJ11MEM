# インターフェース
## Pmodコネクタ
- Tang ConsoleのPmod(上がPmod1, 下がPmod0)のピンアサインは下記の通りです。
``
Pmod1:
+-----+-----+--------+--------+--------+--------+
| 3V3 | GND |LED_RGB |   NC   |   NC   |   NC   |
+-----+-----+--------+--------+--------+--------+
| 3V3 | GND |   NC   |   NC   |   NC   | LOG_TX |
+-----+-----+--------+--------+--------+--------+
Pmod0:
+-----+-----+---------+---------+---------+---------+
| 3V3 | GND |  CLK    |MISO(D0) |MOSI(CMD)| ~CS(D3) |
+-----+-----+---------+---------+---------+---------+
| 3V3 | GND |   NC    |  ~DET   | NC(D2)  |  NC(D1) |
+-----+-----+---------+---------+---------+---------+
```
### Pmod1(LED_RBG)
- WS2812 LED array用の信号を出力しています．デバッグをするにあたりかなり役に立っています．見た目も格好いいのでお薦めです．
- 基本情報8個、詳細情報16個+16個、計40個のLEDアレイへの出力です。
- 8個のアレイを継げれば基本情報8個だけ表示します。
- 表示内容はtop.vを参照して下さい。

### Pmod1(LOG_TX)
- ディスクアクセス等の情報を出力しています．

### Pmod0
  - テープデバイス(PC, TM)をエミュレートするためのSDカードを搭載します．Digilentのピンアサイン準拠になっています．SipeedのSDカードインターフェースもv2であれば同じようです．

## SW1, SW2
Tang Consoleのオンボードスイッチ(SW1, SW2)
- SW1: LEDアレイの出力内容切り替え．詳細はtop.v参照．
- SW2: 今のところ(20251017)明確な用途では使用していません．下記の用途で使うことがありますが，バージョンによって異なります．
  - sdtape.vの書き込みバッファのフラッシュ
  - 磁気テープのEOFフラグ
- SW1, SW2同時押し: SDメモリモジュール，UARTのリセット
  - Reconfigボタンでリセットの方を使うのであまり使っていません．

## ターミナルソフト(TeraTerm, PDP11GUI)との接続
- TTY入出力はTangConsoleのUSB(JTAGと共用)とCPU基板のUARTの2箇所に同じものが出ています．当初USBが不安定だったのでそのようにしたのですが，今はわりと安定してきたのでUSBだけでOKです．(両方使うとTeraTermとPDP11GUIを同時に接続できます．)
- TeraTermの設定
  - 基本的には115200bps,8N1N．ただし，UNIX V6だと7bit, parity=spaceにする必要あり．
  - 改行コードは入力出力ともCR
  - 送信遅延 10ms/字, 100ms/行
- CPU基板のUARTは，TXは3.3V出力(5VTTLで受信可)，RXは5V耐性なので，USBシリアル変換ケーブルは3.3V用，5V用のどちらでもOKです．
